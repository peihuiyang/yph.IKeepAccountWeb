import{j as e,s,ab as o,H as l,J as a,o as r,m as t,d as n,w as u,a as i,e as d,f as c,t as p,b as g,F as m,g as f,r as h,ac as C,v as y,i as b}from"./index.eda1eb19.js";import{_ as B}from"./uni-segmented-control.3611dfc2.js";import{_ as k,r as v}from"./uni-app.es.a5116263.js";import{_ as x}from"./uni-easyinput.bcf294d4.js";import{_ as T}from"./uni-popup-message.e4995bfb.js";import{_}from"./uni-popup.ce1781dd.js";import"./uni-icons.67cc16ba.js";var W=k({components:{},data:()=>({items:["登录","注册"],current:0,colorDefault:"#b4b4b4",colorFocusColor:"#66ffff",inputColorConfigToUserName:{color:"#000000",disableColor:"#eee",borderColor:"#b4b4b4"},inputColorConfigToPassWord:{color:"#000000",disableColor:"#eee",borderColor:"#b4b4b4"},user:"",pass:"",messageText:"",popupMessageType:"success",value:0,disabled:!1,initText:"右滑验证",successText:"验证成功",sliderBlockBg:"#dae2d0",forntBg:"green",sliderBlockWidth:80,reset:!0,isCheckSlider:!0}),onLoad(){},methods:{UserNamePassWrodFocusBorderStyle(){this.inputColorConfigToUserName.borderColor=this.colorFocusColor},PassWordFocusBorderStyle(){this.inputColorConfigToPassWord.borderColor=this.colorFocusColor},UserNamePassWrodBlurBorderStyle(){this.inputColorConfigToUserName.borderColor=this.colorDefault},PassWordBlurBorderStyle(){this.inputColorConfigToPassWord.borderColor=this.colorDefault},onClickItem(e){this.current!==e.currentIndex&&(this.current=e.currentIndex)},userclick(){0===this.current?this.userlogin():this.userregister()},userlogin(){var l=this;e({url:"/api/ika/v1/user/login",method:"POST",timeout:3e3,data:{name:l.user,password:l.pass},success:e=>{l.value=0,1===e.data.status?(l.messageText=e.data.message,l.$refs.popup.open(),s("user_info",e.data.data),o({url:"/pages/mime/mime"})):(l.messageText=e.data.message,l.popupMessageType="warn",l.$refs.popup.open())},fail:e=>{console.log(e),l.messageText="登录失败，请稍后再试("+e.errMsg+")",l.popupMessageType="error",l.$refs.popup.open()}})},userregister(){var s=this;l({title:"注册中……"}),e({url:"/api/ika/v1/user/add",method:"POST",timeout:3e3,data:{uName:s.user,password:s.pass,phone:s.user},success:e=>{a(),1===e.data.status?s.userlogin():(s.messageText=e.data.message,s.popupMessageType="warn",s.$refs.popup.open())},fail:e=>{a(),s.messageText="登录失败，请稍后再试("+e.errMsg+")",s.popupMessageType="error",s.$refs.popup.open()}})},changing(e){this.value=e.detail.value},sliderChange(e){var s=this;if(100!=e.detail.value&&(s.value=e.detail.value,s.$nextTick((()=>{s.value=0,s.messageText="校验失败",s.popupMessageType="error",s.$refs.popup.open()}))),100==e.detail.value){if(s.value=100,s.$emit("success"),!s.reset)return void(s.disabled=!0);s.isCheckSlider=!1}}}},[["render",function(e,s,o,l,a,k){const W=f,P=v(h("uni-segmented-control"),B),F=v(h("uni-easyinput"),x),S=C,U=y,w=b,j=v(h("uni-popup-message"),T),N=v(h("uni-popup"),_);return r(),t(m,null,[n(W,{class:"page"},{default:u((()=>[n(W,{class:"top-background-raduis"}),n(W,{class:"login-box"},{default:u((()=>[n(W,{class:"login-card-title"},{default:u((()=>[n(W,{class:"uni-padding-wrap uni-common-mt login-card-title-content"},{default:u((()=>[n(P,{current:a.current,values:a.items,onClickItem:k.onClickItem},null,8,["current","values","onClickItem"])])),_:1})])),_:1}),0===a.current?(r(),i(W,{key:0,class:"login-card-input"},{default:u((()=>[n(F,{class:"hj-input",modelValue:a.user,"onUpdate:modelValue":s[0]||(s[0]=e=>a.user=e),focus:"",maxlength:"30",trim:!0,onFocus:k.UserNamePassWrodFocusBorderStyle,styles:a.inputColorConfigToUserName,onBlur:k.UserNamePassWrodBlurBorderStyle,placeholder:"请输入账号/手机号"},null,8,["modelValue","onFocus","styles","onBlur"]),n(F,{class:"hj-input",modelValue:a.pass,"onUpdate:modelValue":s[1]||(s[1]=e=>a.pass=e),type:"password",onFocus:k.PassWordFocusBorderStyle,onBlur:k.PassWordBlurBorderStyle,styles:a.inputColorConfigToPassWord,placeholder:"请输入密码"},null,8,["modelValue","onFocus","onBlur","styles"]),n(W,{class:"slider-content"},{default:u((()=>[n(W,{class:"slider-container",style:d({backgroundColor:a.sliderBlockBg,touchAction:"none"})},{default:u((()=>[n(W,{class:"",style:{height:"100%","font-size":"26rpx",color:"#000","text-align":"center","line-height":"60rpx"}},{default:u((()=>[c(p(100==a.value?a.successText:a.initText),1)])),_:1}),n(W,{class:"front",style:d({width:a.value+"%",backgroundColor:a.forntBg})},null,8,["style"]),n(W,{class:"slider-block",style:d({left:a.value?"calc("+a.value+"% - "+a.sliderBlockWidth+"rpx)":"0",width:a.sliderBlockWidth+"rpx"})},{default:u((()=>[c(" >> ")])),_:1},8,["style"]),n(S,{value:a.value,onChange:k.sliderChange,disabled:a.disabled,activeColor:"transparent",onChanging:k.changing,"block-color":"transparent","block-size":35,backgroundColor:"transparent",style:{position:"absolute",top:"6rpx",left:"0","z-index":"5",width:"88%"}},null,8,["value","onChange","disabled","onChanging"])])),_:1},8,["style"])])),_:1})])),_:1})):g("",!0),1===a.current?(r(),i(W,{key:1,class:"login-card-input"},{default:u((()=>[n(F,{class:"hj-input",modelValue:a.user,"onUpdate:modelValue":s[2]||(s[2]=e=>a.user=e),focus:"",maxlength:"30",trim:!0,onFocus:k.UserNamePassWrodFocusBorderStyle,styles:a.inputColorConfigToUserName,onBlur:k.UserNamePassWrodBlurBorderStyle,placeholder:"请输入手机号"},null,8,["modelValue","onFocus","styles","onBlur"]),n(F,{class:"hj-input",modelValue:a.pass,"onUpdate:modelValue":s[3]||(s[3]=e=>a.pass=e),type:"password",onFocus:k.PassWordFocusBorderStyle,onBlur:k.PassWordBlurBorderStyle,styles:a.inputColorConfigToPassWord,placeholder:"请输入密码"},null,8,["modelValue","onFocus","onBlur","styles"]),n(W,{class:"slider-content"},{default:u((()=>[n(W,{class:"slider-container",style:d({backgroundColor:a.sliderBlockBg,touchAction:"none"})},{default:u((()=>[n(W,{class:"",style:{height:"100%","font-size":"26rpx",color:"#000","text-align":"center","line-height":"60rpx"}},{default:u((()=>[c(p(100==a.value?a.successText:a.initText),1)])),_:1}),n(W,{class:"front",style:d({width:a.value+"%",backgroundColor:a.forntBg})},null,8,["style"]),n(W,{class:"slider-block",style:d({left:a.value?"calc("+a.value+"% - "+a.sliderBlockWidth+"rpx)":"0",width:a.sliderBlockWidth+"rpx"})},{default:u((()=>[c(" >> ")])),_:1},8,["style"]),n(S,{value:a.value,onChange:k.sliderChange,disabled:a.disabled,activeColor:"transparent",onChanging:k.changing,"block-color":"transparent","block-size":35,backgroundColor:"transparent",style:{position:"absolute",top:"6rpx",left:"0","z-index":"5",width:"88%"}},null,8,["value","onChange","disabled","onChanging"])])),_:1},8,["style"])])),_:1})])),_:1})):g("",!0),n(W,{class:"login-card-loginIn"},{default:u((()=>[n(U,{class:"login-card-loginIn-btn",disabled:a.isCheckSlider,plain:"true",onClick:k.userclick},{default:u((()=>[c(p(0===a.current?"登 录":"注 册"),1)])),_:1},8,["disabled","onClick"])])),_:1}),0===a.current?(r(),i(W,{key:2,class:"login-bottom-info"},{default:u((()=>[c(" 忘记密码")])),_:1})):g("",!0)])),_:1}),n(W,{class:"bottom-message"},{default:u((()=>[c(" 登录/注册代表你已信任该应用 ")])),_:1})])),_:1}),n(N,{ref:"popup",type:"message"},{default:u((()=>[n(j,{type:a.popupMessageType,duration:2e3},{default:u((()=>[n(w,{style:{"font-size":"10rpx"}},{default:u((()=>[c(p(a.messageText),1)])),_:1})])),_:1},8,["type"])])),_:1},512)],64)}],["__scopeId","data-v-486e191c"]]);export{W as default};
