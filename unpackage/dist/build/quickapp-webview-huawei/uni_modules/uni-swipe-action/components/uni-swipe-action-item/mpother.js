"use strict";var t=require("../../../../common/vendor.js");let i={};i={data:()=>({uniShow:!1,left:0,buttonShow:"none",ani:!1,moveLeft:"",elClass:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`}),watch:{show(t){this.autoClose||this.openState(t)},left(){this.moveLeft=`translateX(${this.left}px)`},buttonShow(t){this.autoClose||this.openState(t)},leftOptions(){this.init()},rightOptions(){this.init()}},mounted(){this.swipeaction=this.getSwipeAction(),void 0!==this.swipeaction.children&&this.swipeaction.children.push(this),this.init()},methods:{init(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.getSelectorQuery()}),100),this.left=0,this.x=0},closeSwipe(t){this.autoClose&&this.swipeaction.closeOther(this)},appTouchStart(t){const{clientX:i}=t.changedTouches[0];this.clientX=i,this.timestamp=(new Date).getTime()},appTouchEnd(t,i,e,s){const{clientX:h}=t.changedTouches[0];let o=Math.abs(this.clientX-h),n=(new Date).getTime()-this.timestamp;o<40&&n<300&&this.$emit("click",{content:e,index:i,position:s})},touchstart(t){this.disabled||(this.ani=!1,this.x=this.left||0,this.stopTouchStart(t),this.autoClose&&this.closeSwipe())},touchmove(t){if(!this.disabled&&(this.stopTouchMove(t),"horizontal"===this.direction))return this.move(this.x+this.deltaX),!1},touchend(){this.disabled||this.moveDirection(this.left)},move(t){t=t||0;const i=this.leftWidth,e=this.rightWidth;this.left=this.range(t,-e,i)},range:(t,i,e)=>Math.min(Math.max(t,i),e),moveDirection(t){const i=this.threshold,e=this.isopen||"none",s=this.leftWidth,h=this.rightWidth;0!==this.deltaX?"none"===e&&h>0&&-t>i||"none"!==e&&h>0&&h+t<i?this.openState("right"):"none"===e&&s>0&&t>i||"none"!==e&&s>0&&s-t<i?this.openState("left"):this.openState("none"):this.openState("none")},openState(t){const i=this.leftWidth,e=this.rightWidth;let s="";switch(this.isopen=this.isopen?this.isopen:"none",t){case"left":s=i;break;case"right":s=-e;break;default:s=0}this.isopen!==t&&(this.throttle=!0,this.$emit("change",t)),this.isopen=t,this.ani=!0,this.$nextTick((()=>{this.move(s)}))},close(){this.openState("none")},getDirection:(t,i)=>t>i&&t>10?"horizontal":i>t&&i>10?"vertical":"",resetTouchStatus(){this.direction="",this.deltaX=0,this.deltaY=0,this.offsetX=0,this.offsetY=0},stopTouchStart(t){this.resetTouchStatus();const i=t.touches[0];this.startX=i.clientX,this.startY=i.clientY},stopTouchMove(t){const i=t.touches[0];this.deltaX=i.clientX-this.startX,this.deltaY=i.clientY-this.startY,this.offsetX=Math.abs(this.deltaX),this.offsetY=Math.abs(this.deltaY),this.direction=this.direction||this.getDirection(this.offsetX,this.offsetY)},getSelectorQuery(){t.index.createSelectorQuery().in(this).selectAll("."+this.elClass).boundingClientRect((t=>{if(0===t.length)return;let i="none";i=this.autoClose?"none":this.show,this.leftWidth=t[0].width||0,this.rightWidth=t[1].width||0,this.buttonShow=i})).exec()}}};var e=i;exports.mpother=e;
